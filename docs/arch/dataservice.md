---
category: TQuant
order: 3
title: 行情模块
---

## Feed Handler

FeedHandler是TQuant的行情接收程序（框架），用于接收券商或交易所提供的行情数据，转换成内部数据格式，输入到TickDB。

### 特性

- 采用类似数据库表结构的方式定义数据类型，便于用户增加字段或者生成自定义的行情。
- 实时压缩行情数据，适合互联网传输。
- 按市场推送行情。
- 有限支持断点续传，适合网络不稳定情况。
- 支持多路行情，包括多市场、不同类型数据。

已有的接收端包括ctp、sina、万得宏汇TDF互联网行情的接收端。接收端的源码开放，机构用户如有其他行情源，可以实现自己的行情接收程序，或者委托TQuant开发。

> 1. 如果接入的行情系统需要认证，比如万得宏汇的TDF行情，需要用户有合法的帐号。TQuant只提供程序，不提供帐号。
  2. 本地服务中的FeedHandler不支持压缩和转发。

## FH Relay

全市场行情实时转发程序。使用压缩格式传输，适合互联网、专线转发全市场行情。

## TickDB

TickDB是专为行情数据开发的实时数据库，是行情系统的核心模块。

### 特性

- 使用共享内存存取实时行情。
- 自动生成分钟线。
- 使用IPC机制（共享内存，信号量等）提供快速的实时行情订阅和发布服务。
- 使用特有压缩算法实时压缩行情，内存占用少。
- 文件型历史Tick数据库，使用压缩算法保存Tick数据，适合快速检索和传输。
- 同时接入多路行情，智能合并行情。

## TickServer

TickServer是面向用户的服务程序，提供按代码订阅行情和推送、取历史Tick的服务。

需要和TickDB运行在同一台服务器，同样使用压缩格式传输数据，占用带宽小。

### 与TickDB区别

- 面向用户，提供按用户订阅和推送实时行情。
- 支持按代码取数据。
- 支持取静态文件，如代码表等数据。
- TickServer提供远程服务，TickDB是本机内使用。

### 与FeedHandler的区别

FeedHandler不能订阅，只能全市场推送，不区分用户。

## 历史数据维护方案

### 本地维护

TickDB提供了数据导入导出工具。该工具可以很方便的导入导出CSV格式的历史数据。用户每日收盘后手动导入当日的Tick数据。

因为本地服务的Tick数据可能不完整，并且代码数量受限，所以tqc不自动从本地的实时tick数据生成历史数据。TQuant提供了从服务器下载当日Tick数据的服务，收盘后可以下载。个人用户如有需要，可以订阅该服务。

### 云服务维护

每天收盘后TickDB会自动把当天实时Tick转换历史数据。用户每次取历史tick，会保存到本地HisCache中。如果服务器数据发生变化，HisCache会自动更新数据。
